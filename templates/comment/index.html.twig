{% extends 'base.html.twig' %}

{% block title %}
	{{parent()}}
	- Commentaires
{% endblock %}

{% block page_title %}
	<h1>Tous les commentaires
	</h1>
{% endblock %}

{% block body %}
	<a href="{{ path('comment_new') }}" class="btn btn-success mb-5" role="button">Créer</a>
	<div class="accordion accordion-flush" id="commentAccordion">
		{% for comment in comments %}
			<div class="accordion-item">
				<h2 class="accordion-header" id="flush-heading-{{comment.id}}">
					<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse-{{comment.id}}" aria-expanded="false" aria-controls="flush-collapse-{{comment.id}}">
						{{ comment.id }}
					</button>
				</h2>
				<div id="flush-collapse-{{comment.id}}" class="accordion-collapse collapse" aria-labelledby="flush-heading-{{comment.id}}" data-bs-parent="#commentAccordion">
					<div class="accordion-body">							
						<p>"{{ comment.comment }}"</p>
						<p class="text-muted fst-italic">{{ comment.author.username }} - {{ comment.rate }}/5</p>
						<div class="btn-group">
							<a href="{{ path("comment_show", { id: comment.id }) }}" class="btn btn-secondary" role="button">Voir la fiche</a>
						</div>
					</div>
				</div>
			</div>
		{% else %}
			<p class="m-5">Aucun Commentaire trouvé.</p>
		{% endfor %}
	</div>

{% endblock %}
