{% extends 'base.html.twig' %}

{% block title %}
	{{parent()}}
	-
	{{program.title}}
	Saison
	{{season.number}}
{% endblock %}

{% block page_title %}
	<h1>{{program.title}}
	</h1>
{% endblock %}

{% block body %}
	<div class="row">
		<div class="col-12 col-lg-8">
			<div class="card">
				<div class=" card-body">
					<h2 class="card-title">Saison
						{{ season.number }}</h2>
					<p class="card-text">{{ season.year }}</p>
					<div class="btn-group me-2 flex-wrap" role="group" aria-label="First group">
						<a href="{{ path('episode_new') }}" class="btn btn-success mb-5" role="button">Créer Episode</a>
						<a href="{{ path("season_edit", { slug: season.slug }) }}" class="btn btn-warning mb-5" role="button">Editer</a>
						{{ include('season/_delete_form.html.twig') }}
					</div>
					<div class="accordion accordion-flush" id="episodeAccordion">
						{% for episode in season.episodes %}
							<div class="accordion-item">
								<h2 class="accordion-header" id="flush-heading-{{episode.id}}">
									<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse-{{episode.id}}" aria-expanded="false" aria-controls="flush-collapseOne">
										{{ episode.number }}
										-
										{{ episode.title }}
									</button>
								</h2>
								<div id="flush-collapse-{{episode.id}}" class="accordion-collapse collapse" aria-labelledby="flush-heading-{{episode.id}}" data-bs-parent="#accordionFlushExample">
									<div class="accordion-body">
										<a href="{{ path('episode_edit', {'slug': episode.slug}) }}" class="btn btn-warning" role="button">Editer</a>
										{{ include('episode/_delete_form.html.twig') }}
										<p>{{ episode.summary }}</p>
									</div>
								</div>
							</div>
						{% else %}
							<p class="m-5">
								Aucun épisode trouvée.
							</p>
						{% endfor %}
					</div>
				</div>
			</div>
		</div>
	</div>

	<a href="{{ path('program_show', {'slug': program.slug}) }}" class="btn btn-secondary m-4" role="button">
		Retour
	</a>
{% endblock %}
